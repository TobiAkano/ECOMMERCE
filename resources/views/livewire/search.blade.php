<div class="flex-1 relative" x-data>
    
    <form action="{{ route('search') }}" autocomplete="off">
        
        <x-jet-input name="name" wire:model="search" type="text" class="w-full" placeholder="search here" />

        <button class="absolute top-0 right-0 w-12 h-full bg-gray-300 flex items-center justify-center rounded-r-md">
            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30px" height="30px"
                viewBox="0 0 171 171" style=" fill:#000000;">
                <g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt"
                stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0"
                font-family="none" font-weight="none" font-size="none" text-anchor="none"
                style="mix-blend-mode: normal">
                    <path d="M0,171.98967v-171.98967h171.98967v171.98967z" fill="none"></path>
                    <g fill="#6875f5">
                        <path   
                            d="M69.93581,19.23802c-12.99199,0 -25.98346,4.94245 -35.8694,14.82838c-19.77188,19.77187 -19.77188,51.96693 0,71.7388c9.88594,9.88594 22.84505,14.83099 35.93724,14.83099c13.09219,0 26.0513,-4.94506 35.93724,-14.83099c19.63828,-19.77187 19.63619,-51.96693 -0.13568,-71.7388c-9.88594,-9.88594 -22.87741,-14.82838 -35.8694,-14.82838zM69.87057,27.12057c10.95469,0 21.90885,4.13932 30.19167,12.55573c16.69922,16.69922 16.6987,43.81979 0.13307,60.51901c-16.69922,16.69922 -43.81979,16.69922 -60.51901,0c-16.69922,-16.69922 -16.69922,-43.81979 0,-60.51901c8.28281,-8.28281 19.23959,-12.55573 30.19427,-12.55573zM69.87057,35.1362c-9.21797,0 -17.90261,3.60599 -24.4487,10.28568c-6.27891,6.27891 -9.75182,14.42865 -10.1526,23.24583c-0.13359,2.27109 1.60365,4.00729 3.87474,4.14088h0.13307c2.1375,0 3.87422,-1.73724 4.00781,-3.87474c0.26719,-6.81328 3.07109,-13.09271 7.74687,-17.90208c5.07656,-5.07656 11.75834,-7.87994 18.83881,-7.87994c2.27109,0 4.00781,-1.73672 4.00781,-4.00781c0,-2.27109 -1.73672,-4.00781 -4.00781,-4.00781zM46.75781,85.5c-2.21345,0 -4.00781,1.79436 -4.00781,4.00781c0,2.21345 1.79436,4.00781 4.00781,4.00781c2.21345,0 4.00781,-1.79436 4.00781,-4.00781c0,-2.21345 -1.79436,-4.00781 -4.00781,-4.00781zM111.36813,107.54297c-1.01865,0 -2.02061,0.4013 -2.75537,1.20287c-1.60313,1.60313 -1.60313,4.14036 0,5.60989l3.33984,3.33984c-0.80156,1.60312 -1.20286,3.34037 -1.20286,5.21068c0,3.20625 1.20182,6.27943 3.47292,8.55052l17.10104,16.83229c2.40469,2.40469 5.47526,3.60599 8.54791,3.60599c3.07266,0 6.14583,-1.20182 8.55052,-3.47292c4.67578,-4.67578 4.67578,-12.28958 0,-16.96536l-17.09844,-17.10104c-2.27109,-2.27109 -5.34427,-3.47292 -8.55052,-3.47292c-1.87031,0 -3.60755,0.4013 -5.21068,1.20287l-3.33984,-3.33984c-0.80156,-0.80156 -1.83587,-1.20287 -2.85452,-1.20287zM122.77318,118.76537c1.06875,0 2.13698,0.4013 2.80495,1.20286l16.96536,16.96536c1.60313,1.60313 1.60313,4.14036 0,5.6099c-1.60312,1.60313 -4.14036,1.60313 -5.6099,0l-16.96536,-16.83229c-0.80156,-0.80156 -1.20286,-1.86927 -1.20286,-2.93802c0,-1.06875 0.4013,-2.13698 1.20286,-2.80495c0.80156,-0.80156 1.7362,-1.20286 2.80495,-1.20286z">
                        </path>
                    </g>
                </g>
            </svg>
        </button>
    </form> 


    {{-- Results --}}
    <div class="absolute w-full hidden" :class="{ 'hidden' : !$wire.open }" @click.away="$wire.open = false">
        <div class="bg-white rounded-lg shadow mt-1">
            <div class="px-4 py-3 space-y-1">

                @forelse ($products as $product)
                    <a class="flex" href="{{ route('products.show', $product) }}">
                        <img class="w-16 h-12 object-cover" src="{{ Storage::url($product->images->first()->url) }} " alt="">
                        
                        <div class="ml-4 text-gray-700">
                            <p class="text-lg font-semibold leading-5">{{$product->name}}</p>
                            <p>Category: {{$product->subcategory->category->name}}</p>
                        </div>
                    </a>
                @empty
                    <p class="text-lg font-semibold leading-5">No results found :(</p>              
                @endforelse
            </div>
        </div>
    </div>
</div>